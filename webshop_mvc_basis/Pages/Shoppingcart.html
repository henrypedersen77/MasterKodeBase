<!DOCTYPE html>
<html>
<head>
    <title>
    Shopping Cart
    </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/Styles/StyleSheet.css" rel="stylesheet" />
    <link href="/Frameworks/bootstrap-3.3.5-dist/css/bootstrap.css" rel="stylesheet" />
    <script src="/Frameworks/jQuery/jquery-2.1.4.js"></script>
    <script src="/Frameworks/bootstrap-3.3.5-dist/js/bootstrap.js"></script>
    <script src="/Scripts/Template.js"></script>
    <script src="/Frameworks/ember-template-compiler.js"></script>
    <script src="/Frameworks/ember.debug.js"></script>
    <script src="/Frameworks/ember-data.js"></script>
    <script src="../Scripts/shoppingcart.js"></script>
</head>
<body id="ember-app">
    <div id="header"></div> <!-- Template.js indsætter Template.html her -->
    <script type="text/x-handlebars" data-template-name="application">
        <div id="content">
            {{outlet}}
        </div>
    </script>
    <script type="text/x-handlebars" data-template-name="index">
        <div id="ContentPlaceHolder1_pnlShoppingCart">
            <!-- MVC JavaScript opgave ----
                 Der skal laves en table per cart returneret fra HTTP get kaldet til /api/cart/{ClientID}/orders -->
            <table class="CartTable">
                {{#each model as |order index|}}
                <tr>
                    <td rowspan="2" style="width:50px;">
                        <input type="image" class="productImage" src={{order.Product.Image}} />
                    </td>
                    <td align="left" style="width:350px;">
                        <h4>
                        {{order.Product.Name}}
                        </h4>
                        <br />
                        Item No: {{order.Product.ID}}
                        <br />
                        In Stock
                    </td>
                    <td>
                    Unit Price
                    <hr />
                    </td>
                    <td>
                    Quantity
                    <hr />
                    </td>
                    <td>
                    Item Total
                    <hr />
                   </td>
                    <!-- MVC JavaScript opgave ----
                         Ved tryk på delete skal der sendes en HTTP Delete til /api/cart/{cartID}
                         + denne side skal opfriskes -->
                    <td>
                    <a id="ContentPlaceHolder1_del8" {{action "deleteCart" index}}>
                        Delete Item
                        </a>
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td>
                    {{order.Product.Price}}
                    </td>
                    <td>
                        <!-- MVC JavaScript opgave ----
                             Rettes der i nedenstående amount, skal der sendes en HTTP post til /api/cart/{cartid}/amount med
                             antal angivet i JSON dataet-->
                        Amount
                        <select onchange={{action "changeAmount" index }} >
                            {{#each selectedAmount as |amountChoice|}}
                            <option value={{amountChoice}} selected={{eq order.Amount amountChoice}}>
                            {{amountChoice}}
                            </option>
                            {{/each}}
                        </select>
                    </td>
                    <td>
                    {{mul order.Amount order.Product.Price}}
                    </td>
                </tr>
                {{/each}}
            </table>
        </div>
        <table>
            <tr>
                <td>
                    <b>
                    Total: 
                    </b>
                </td>
                <td>
                    {{model.subtotal}}
                </td>
            </tr>
            <tr>
                <td>
                    <b>
                    Vat: 
                    </b>
                </td>
                <td>
                    {{model.vat}};
                </td>
            </tr>
            <tr>
                <td>
                    <b>
                    Shipping: 
                    </b>
                </td>
                <td>
                    £ 15
                </td>
            </tr>
            <tr>
                <td>
                    <b>
                    Total Amount: 
                    </b>
                </td>
                <td>
                    {{model.totalamount}}
                </td>
            </tr>
            <tr>
                <td>
                    <br />
                    <!-- MVC JavaScript opgave ----
                         Ved tryk på continue shopping redirectes der til "Pages/Index.html" -->
                    <a id="ContentPlaceHolder1_LinkButton1" href="Index.html">Continue Shopping</a> &nbsp;&nbsp; or
                    <!-- MVC JavaScript opgave ----
                         Ved tryk på checkout skal der sendes en HTTP post til /api/cart/paid, med JSON data på formen
                            [
                                {ID: 1},
                                {ID: 2}
                            ]
                    ID'erne angiver cart'sne ID'er.

                    Der skal sluttes af med at redirecte til Pages/Success.html -->
                    <input {{action "checkOut"}} type="button" value="Check Out" id="ContentPlaceHolder1_btnCheckout" class="button" style="width:250px;" />
                </td>
            </tr>
        </table>
    </script>
</body>
</html>