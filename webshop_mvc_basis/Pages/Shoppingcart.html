<!DOCTYPE html>
<html>
<head>
    <title>Shopping Cart</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="/Styles/StyleSheet.css" rel="stylesheet" />
    <link href="/Frameworks/bootstrap-3.3.5-dist/css/bootstrap.css" rel="stylesheet" />

    <script src="/Frameworks/jQuery/jquery-2.1.4.js"></script>
    <script src="/Frameworks/bootstrap-3.3.5-dist/js/bootstrap.js"></script>
    <script src="/Scripts/Template.js"></script>
    <script src="../Frameworks/backbone/underscore-min.js"></script>
    <script src="../Frameworks/backbone/backbone-min.js"></script>
</head>
<body>
    <div id="header"></div> <!-- Template.js indsætter Template.html her -->

    <div id="content">

        <div id="ContentPlaceHolder1_pnlShoppingCart">
            <!-- MVC JavaScript opgave ----
             Der skal laves en table per cart returneret fra HTTP get kaldet til /api/chart/{userId}/orders"-->
            <script type="text/template" id="shoppingcart-tmpl">
                <table class="CartTable">
                    <tr>
                        <td align="left" style="width:350px;">
                            <h4>Product.Name</h4><br />
                            Item No: Product.ID<br />
                            In Stock
                        </td>
                        <td>Unit Price<hr /></td>
                        <td>Quantity<hr /></td>
                        <td>Item Total<hr /></td>

                        <!-- MVC JavaScript opgave ----
                        Ved tryk på delete skal der sendes en HTTP Delete til /api/cart/{cartID}
                        + denne side skal opfriskes -->
                        <td></td>
                    </tr>

                    <% _.each(cartlist.models, function(item) { %>
                    <tr>
                        <td align="left" style="width:350px;">
                            <input type="image" src="../Content/Images/Products/<%= item.attributes.Product.Image %>" />
                            <h4><%= item.attributes.Product.Name %></h4><br />
                            Item No: <%= item.attributes.ProductID %><br />
                            In Stock
                        </td>

                        <td><%= item.attributes.Product.Price %></td>
                        <td>
                            <!-- MVC JavaScript opgave ----
                            Rettes der i nedenstående amount, skal der sendes en HTTP post til /api/cart/{cartid}/amount med
                            antal angivet i JSON dataet-->

                            <select id="Quantity" name="<%=item.attributes.ID %>" data="<%=item.attributes.ID %>">
                                <% _.each(dropdownlist.models, function(dropdownitem) {
                                if (dropdownitem.attributes.item == item.attributes.Amount) { %>
                                <option selected=" selected" value="<%= dropdownitem.attributes.item %>">
                                    <%= dropdownitem.attributes.item %>
                                </option>
                                <% } else { %>
                                <option value="<%= dropdownitem.attributes.item %>"><%= dropdownitem.attributes.item %></option>
                                <% } }); %>
                            </select>
                        </td>
                        <td><%= lineamount(item.attributes.Amount, item.attributes.Product.Price) %></td>
                        <td>
                            <button id="btnDelete" class="button"  name="<%=item.attributes.ID %>" data-id="<%=item.attributes.ID %>">Delete Item</button>
                        </td>
                    </tr>
                    <% }); %>
                </table>
            </script>

        </div>

        <!--<script type="text/template" id="shoppingcartsum-tmpl">-->
        <table>
            <tr>
                <td>
                    <b>Total: </b>
                </td>
                <td>
                    <%= linetotal %>
                </td>
            </tr>

            <tr>
                <td>
                    <b>Vat: </b>
                </td>
                <td>
                    <%= vat %>
                </td>
            </tr>
            <tr>
                <td>
                    <b>Shipping: </b>
                </td>
                <td>
                    <%= shipping %>
                </td>
            </tr>

            <tr>
                <td>
                    <b>Total Amount: </b>
                </td>
                <td>
                    <%= total %>
                </td>
            </tr>

            <tr>
                <td>
                    <br />
                    <!-- MVC JavaScript opgave ----
                    Ved tryk på continue shopping redirectes der til "Pages/Index.html" -->
                    <a id="ContentPlaceHolder1_LinkButton1" href="Index.html">Continue Shopping</a> &nbsp;&nbsp; or

                    <!-- MVC JavaScript opgave ----
                         Ved tryk på checkout skal der sendes en HTTP post til api/cart/paid, med JSON data på formen
                            [
                                {ID: 1},
                                {ID: 2}
                            ]
                    ID'erne angiver cart'sne ID'er.

                    Der skal sluttes af med at redirecte til Pages/Success.html -->
                    <input type="submit" value="Check Out" id="ContentPlaceHolder1_btnCheckout" class="button" style="width:250px;" />
                </td>
            </tr>

        </table>
        <!--</script>-->
        <script src="../Scripts/Shppingcart.js"></script>
    </div>
</body>
</html>
