<!DOCTYPE html>
<html>
<head>
    <title>Shopping Cart</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="../Styles/StyleSheet.css" rel="stylesheet" />
    <link href="../Frameworks/bootstrap-3.3.5-dist/css/bootstrap.css" rel="stylesheet" />

    <script src="../Frameworks/jQuery/jquery-2.1.4.js"></script>
    <script src="../Frameworks/bootstrap-3.3.5-dist/js/bootstrap.js"></script>
    <script src="../Scripts/Template.js"></script>
    <script src="../Frameworks/ember/js/libs/ember_1.13.js"></script>
    <script src="../Frameworks/ember/js/libs/ember-template-compiler_1.13.js"></script>
    <script src="../Scripts/Shopingcart.js"></script>
</head>
<body>
    <div id="header"></div> <!-- Template.js indsætter Template.html her -->
    <script type="text/x-handlebars" id="index">
        <div id="content">

            <div id="ContentPlaceHolder1_pnlShoppingCart">
                <!-- MVC JavaScript opgave ----
                     Der skal laves en table per cart returneret fra HTTP get kaldet til /api/cart/{ClientID}/orders -->
                <table class="CartTable">
                    <tr>
                        <td align="left" style="width:350px;">
                            <h4>Product.Name</h4><br />
                            Item No: Product.ID<br />
                            In Stock
                        </td>
                        <td>Unit Price<hr /></td>
                        <td>Quantity<hr /></td>
                        <td>Item Total<hr /></td>

                        <td></td>
                    </tr>

                    {{#each model.cart as |item|}}
                    <tr>
                        <td align="left" style="width:350px;">
                            <input type="image" src="{{item.ImageUrl}}" />
                            <h4>{{item.Name}}</h4><br />
                            Item No: {{item.ProductID}}<br />
                            In Stock
                        </td>
                        <td>{{item.Price}}<hr /></td>
                        <td>{{view "select" content=model.quantities selectionBinding=item.Amount }}<hr /></td>
                        <td>{{item.LineAmount}}<hr /></td>

                        <!-- MVC JavaScript opgave ----
                             Ved tryk på delete skal der sendes en HTTP Delete til /api/cart/{cartID}
                             + denne side skal opfriskes -->
                        <td><a href="#" {{action "deletecart" item.ID}}>Delete Item</a></td>
                    </tr>
                    {{/each}}
                </table>

            </div>

            <table>
                <tr>
                    <td>
                        <b>Total: </b>
                    </td>
                    <td>
                        {{model.totallineamount}}
                    </td>
                </tr>

                <tr>
                    <td>
                        <b>Vat: </b>
                    </td>
                    <td>
                        {{model.vat}}
                    </td>
                </tr>
                <tr>
                    <td>
                        <b>Shipping: </b>
                    </td>
                    <td>
                        £ 15
                    </td>
                </tr>

                <tr>
                    <td>
                        <b>Total Amount: </b>
                    </td>
                    <td>
                        {{model.totalamount}}
                    </td>
                </tr>

                <tr>
                    <td>
                        <br />
                        <!-- MVC JavaScript opgave ----
                             Ved tryk på continue shopping redirectes der til "Pages/Index.html" -->
                        <a id="ContentPlaceHolder1_LinkButton1" href="Index.html">Continue Shopping</a> &nbsp;&nbsp; or

                        <!-- MVC JavaScript opgave ----
                             Ved tryk på checkout skal der sendes en HTTP post til /api/cart/paid, med JSON data på formen
                                [
                                    {ID: 1},
                                    {ID: 2}
                                ]
                        ID'erne angiver cart'sne ID'er.

                        Der skal sluttes af med at redirecte til Pages/Success.html -->
                        <input type="submit" value="Check Out" id="ContentPlaceHolder1_btnCheckout" class="button" style="width:250px;" />
                    </td>
                </tr>

            </table>

        </div>
    </script>
</body>
</html>